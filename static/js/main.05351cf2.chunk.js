(this.webpackJsonpa=this.webpackJsonpa||[]).push([[0],{28:function(e,t,a){},33:function(e,t,a){e.exports=a(48)},38:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),c=a.n(l),o=(a(28),a(38),a(39),a(12)),s=a(17),i=a(2),u=a(16),d=a(31),m=a(15);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={key_stats:{},profile:{},chart:[],quote:0,symbol:""};function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={side:"buy",price:0,quantity:0,ticker:"",showModal:!1,error:!1};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={loaded:!1,tradeHistory:[]};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j={holdings:{},cash:{},stock_quotes:{},loaded:!1,portfolio_loaded:!1,stock_quotes_loaded:!1,longChart:{},shortChart:{},longShortChart:{}},S=Object(u.c)({stock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOAD_STOCK_DATA":case"SEARCH_SUCCESS":return h({},e,{key_stats:{},profile:{},chart:[],quote:0,symbol:t.symbol});case"LOAD_KEY_STATS":return h({},e,{key_stats:t.key_stats});case"LOAD_STOCK_PROFILE":return h({},e,{profile:t.profile});case"LOAD_STOCK_QUOTE":return h({},e,{quote:t.quote});case"LOAD_STOCK_CHART":return h({},e,{chart:t.chart});default:return e}},trade:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_SIDE":return b({},e,{side:t.side,error:!1});case"SUBMIT_TRADE":return b({},e,{price:t.price,quantity:t.quantity,ticker:t.ticker,showModal:!0,error:!1});case"SUBMIT_INVALID_TRADE":return b({},e,{price:t.price,quantity:t.quantity,ticker:t.ticker,showModal:!1,error:!0});case"CLOSE_MODAL":case"MODAL_CONFIRM_TRADE":return b({},e,{showModal:!1,error:!1});default:return e}},portfolio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOAD_PORTFOLIO_DATA":return _({},e,{initialState:j});case"LOADED_PORTFOLIO_DATA":return _({},e,{portfolio_loaded:!0,loaded:e.stock_quotes_loaded,holdings:t.payload.stock,cash:t.payload.cash});case"LOADED_PORTFOLIO_STOCK_PRICE":return _({},e,{stock_quotes_loaded:!0,loaded:e.portfolio_loaded,stock_quotes:t.payload});case"CHARTS_CREATED":return _({},e,{longChart:t.longChart,shortChart:t.shortChart,longShortChart:t.longShortChart});default:return e}},tradeHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOAD_TRADE_HISTORY":return g({},e,{loaded:!1});case"LOADED_TRADE_HISTORY":return g({},e,{loaded:!0,tradeHistory:t.tradeHistory});default:return e}}}),N=[d.a],T=Object(u.e)(S,{},Object(u.d)(u.a.apply(void 0,N)));var C=a(3),w=a(4),D=a(6),A=a(5),R=a(7),P="sk_4bf3e9ec445e4ff78d3aebdf218190a4",q="https://cloud.iexapis.com/v1",L=function(e,t){return function(a){var n="stock/".concat(e,"/stats");fetch("".concat(q,"/").concat(n,"?token=").concat(P)).then((function(n){200===n.status?n.json().then((function(n){a({type:"SEARCH_SUCCESS",symbol:e}),t.push("/stock?ticker=".concat(e))})):(a({type:"SYMBOL_NOT_FOUND"}),document.getElementById("search-info").innerText="Ticker not found")})).catch((function(e){return console.log(e)}))}},M=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this,t=this.props.search;return r.a.createElement("nav",{className:"level"},r.a.createElement("div",{className:"level-item"},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("p",{className:"control"},r.a.createElement("input",{className:"input is-fullwidth",type:"text",placeholder:"Input stock symbol",id:"inputStockText",onKeyPress:function(a){"Enter"===a.key?t(a.target.value.toUpperCase(),e.props.history):document.getElementById("search-info").innerText=""}})),r.a.createElement("p",{className:"control"},r.a.createElement("button",{className:"button",id:"inputStockBtn",onClick:function(){t(document.getElementById("inputStockText").value.toUpperCase(),e.props.history)}},"Search")))))}}]),t}(n.Component),I=Object(s.f)(Object(i.b)(null,{search:L})(M));var H,x,U=function(){return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("p",{className:"navbar-item"},r.a.createElement(o.b,{to:"/"},"Stock Trading App"))),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("span",{className:"has-text-danger is-size-7",id:"search-info"})),r.a.createElement("div",{className:"navbar-item"},r.a.createElement(I,null))))},B=function(){return function(e){e({type:"START_LOAD_PORTFOLIO_DATA"}),fetch("".concat("http://localhost:5000","/portfolio?user=").concat("qwerty")).then((function(t){200===t.status?t.json().then((function(t){e({type:"LOADED_PORTFOLIO_DATA",payload:t}),console.log(t),e(K(t.stock))})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}},K=function(e){return function(t){t({type:"START_LOAD_PORTFOLIO_STOCK_PRICE"}),fetch("".concat(q,"/stock/market/batch?symbols=").concat(Object.keys(e).join(","),"&types=previous&token=").concat(P)).then((function(a){200===a.status?a.json().then((function(a){console.log(a),t({type:"LOADED_PORTFOLIO_STOCK_PRICE",payload:a}),t(z(e,a))})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}},z=function(e,t){return function(a){console.log(e,t);var n={},r={},l={long:0,short:0};Object.keys(e).map((function(a,c){var o=Math.abs((e[a].position*t[a].previous.close).toFixed(2));e[a].position>0?(e[a.sector]in n?n[e[a].sector]+=o:n[e[a].sector]=o,l.long+=o):(e[a.sector]in r?r[e[a].sector]+=o:r[e[a].sector]=o,l.short+=o)})),a({type:"CHARTS_CREATED",longChart:n,shortChart:r,longShortChart:l})}},F=function(e){var t=r.a.createElement("span",{className:"is-size-7"},"\xa0USD");console.log(e.stock_quotes);var a=r.a.createElement("thead",{className:"bold"},r.a.createElement("tr",null,r.a.createElement("td",null,"Symbol"),r.a.createElement("td",null,"Quantity"),r.a.createElement("td",null,"Cost Basis"),r.a.createElement("td",null,"Current Price"),r.a.createElement("td",null,"Market Value")));return!1===e.loaded?r.a.createElement("div",{className:"whitebg"},r.a.createElement("p",{className:"is-size-4"},"Portfolio Holdings"),r.a.createElement("table",{className:"table is-fullwidth"},a),r.a.createElement("i",{className:"fas fa-spinner fa-spin"}),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",{className:"whitebg"},r.a.createElement("p",{className:"is-size-4"},"Portfolio Holdings"),r.a.createElement("table",{className:"table is-fullwidth"},a,r.a.createElement("tbody",null,Object.keys(e.holdings).map((function(a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:"bold"},r.a.createElement(o.b,{to:"/stock?ticker=".concat(a)},a)),r.a.createElement("td",null,e.holdings[a].position),r.a.createElement("td",null,e.holdings[a].cost_basis," ",t),r.a.createElement("td",null,e.stock_quotes[a].previous.close,t),r.a.createElement("td",null,Math.round(e.stock_quotes[a].previous.close*e.holdings[a].position*100)/100,t))})),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",{className:"bold"},"Cash"),r.a.createElement("td",null,e.cash," ",t)))))},Y=function(e){var t=r.a.createElement("span",{className:"is-size-7"},"\xa0USD");console.log(e.tradeHistory);var a=r.a.createElement("thead",{className:"bold"},r.a.createElement("tr",null,r.a.createElement("td",null,"Symbol"),r.a.createElement("td",null,"Quantity"),r.a.createElement("td",null,"Price"),r.a.createElement("td",null,"Market Value"),r.a.createElement("td",null,"Timestamp")));return!1===e.loaded?r.a.createElement("div",{className:"whitebg"},r.a.createElement("p",{className:"is-size-4"},"Trade History"),r.a.createElement("table",{className:"table is-fullwidth"},a),r.a.createElement("i",{className:"fas fa-spinner fa-spin"}),r.a.createElement("br",null),r.a.createElement("br",null)):r.a.createElement("div",{className:"whitebg"},r.a.createElement("p",{className:"is-size-4"},"Last 10 Trades"),r.a.createElement("table",{className:"table is-fullwidth"},a,r.a.createElement("tbody",null,e.tradeHistory.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",{className:"bold"},r.a.createElement(o.b,{to:"/stock?ticker=".concat(e.symbol)},e.symbol)),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.price,t),r.a.createElement("td",null,Math.round(e.price*e.quantity*100)/100,t),r.a.createElement("td",null,new Date(e.createdAt).toLocaleString()))})),r.a.createElement("tr",null))))},$=a(19),J=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadPortfolioData,a=e.loadTradeHistory;t(),a("qwerty");var n={chart:{height:280,type:"donut"},series:[]};(H=new $.a(document.querySelector("#portfoliochart"),n)).render(),(x=new $.a(document.querySelector("#portfoliochart2"),n)).render()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.longChart,n=t.shortChart,r=(t.longShortChart,t.cash);console.log(r),e.longChart!==a&&(H.updateOptions({labels:Object.keys(a).concat("Cash")}),H.updateSeries(Object.values(a).concat(r)),x.updateOptions({labels:Object.keys(n)}),x.updateSeries(Object.values(n)))}},{key:"render",value:function(){var e=this.props,t=e.holdings,a=e.stock_quotes,n=e.cash,l=e.loaded,c=e.tradeHistory,o=e.tradeHistoryLoaded,s=e.longShortChart;return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement("br",null),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"columns is-multiline is-centered"},r.a.createElement("div",{className:"column is-half-desktop is-12-tablet"},r.a.createElement("div",null,r.a.createElement("p",null,l?"Long holdings: $".concat(s.long):""),r.a.createElement("div",{id:"portfoliochart"}))),r.a.createElement("div",{className:"column is-half-desktop is-12-tablet"},r.a.createElement("p",null,l?"Short holdings: $".concat(s.short):""),r.a.createElement("div",{id:"portfoliochart2"})),r.a.createElement("div",{className:"column is-half-desktop is-12-tablet"},r.a.createElement(F,{holdings:t,stock_quotes:a,cash:n,loaded:l})),r.a.createElement("div",{className:"column is-half-desktop is-12-tablet"},r.a.createElement(Y,{tradeHistory:c,loaded:o})))))}}]),t}(r.a.Component),Q=Object(i.b)((function(e){return{loaded:e.portfolio.loaded,holdings:e.portfolio.holdings,stock_quotes:e.portfolio.stock_quotes,cash:e.portfolio.cash,longChart:e.portfolio.longChart,shortChart:e.portfolio.shortChart,longShortChart:e.portfolio.longShortChart,tradeHistory:e.tradeHistory.tradeHistory,tradeHistoryLoaded:e.tradeHistory.loaded}}),{loadPortfolioData:B,loadTradeHistory:function(e){return function(t){t({type:"START_LOAD_TRADE_HISTORY"}),console.log(e),fetch("".concat("http://localhost:5000","/trade?username=").concat(e,"&page=",0)).then((function(e){200===e.status?e.json().then((function(e){console.log(e.data),t({type:"LOADED_TRADE_HISTORY",tradeHistory:e.data})})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}}})(J),V=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.key_stats,e.profile);return r.a.createElement("div",{className:"whitebg padded has-text-left outline"},r.a.createElement("p",{className:"bold is-size-5"},"Company Summary"),r.a.createElement("br",null),r.a.createElement("p",{className:"is-size-6"},t.description))}}]),t}(r.a.Component),W=Object(i.b)((function(e){return{key_stats:e.stock.key_stats,profile:e.stock.profile}}),{})(V);var G,X=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.key_stats;t.profile;return r.a.createElement("div",{className:"whitebg padded has-text-left outline"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-half"},r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",{className:"bold"},r.a.createElement("tr",null,r.a.createElement("td",null,"Key Stats"),r.a.createElement("td",null))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Market Cap"),r.a.createElement("td",null,(e=a.marketcap)>Math.pow(10,12)?"".concat(Math.round(e/Math.pow(10,12)*1e3)/1e3," T"):e>Math.pow(10,9)?"".concat(Math.round(e/Math.pow(10,9)*1e3)/1e3," B"):e>Math.pow(10,6)?"".concat(Math.round(e/Math.pow(10,6)*1e3)/1e3," M"):e>Math.pow(10,3)?"".concat(Math.round(e/Math.pow(10,3)*1e3)/1e3," K"):e)),r.a.createElement("tr",null,r.a.createElement("td",null,"P/E"),r.a.createElement("td",null,Math.round(100*a.peRatio)/100)),r.a.createElement("tr",null,r.a.createElement("td",null,"EPS"),r.a.createElement("td",null,Math.round(100*a.ttmEPS)/100)),r.a.createElement("tr",null,r.a.createElement("td",null,"Dividend Yield"),r.a.createElement("td",null,Math.round(100*a.dividendYield*100)/100,"%")),r.a.createElement("tr",null,r.a.createElement("td",null,"Beta"),r.a.createElement("td",null,Math.round(100*a.beta)/100))))),r.a.createElement("div",{className:"column is-half"},r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",{className:"bold"},r.a.createElement("tr",null,r.a.createElement("td",null,"Technicals"),r.a.createElement("td",null))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"200 day SMA"),r.a.createElement("td",null,a.day200MovingAvg)),r.a.createElement("tr",null,r.a.createElement("td",null,"52 Week High"),r.a.createElement("td",null,a.week52high)),r.a.createElement("tr",null,r.a.createElement("td",null,"52 Week Low"),r.a.createElement("td",null,a.week52low)),r.a.createElement("tr",null,r.a.createElement("td",null,"52 Week Price Change"),r.a.createElement("td",null,Math.round(100*a.week52change*100)/100,"%")))))))}}]),t}(r.a.Component),Z=Object(i.b)((function(e){return{key_stats:e.stock.key_stats,profile:e.stock.profile}}),{})(X),ee=function(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"stockchart",className:"whitebg outline"}),r.a.createElement("br",null),r.a.createElement(Z,null),r.a.createElement("br",null),r.a.createElement(W,null))},te=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=new URLSearchParams(window.location.search).get("ticker"),t=this.props,a=(t.key_stats,t.quote),n=t.holdings;return console.log(n),r.a.createElement("div",{className:"whitebg outline"},r.a.createElement("table",{className:"table is-fullwidth is-borderless"},r.a.createElement("thead",{className:"bold"},r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"25%"}},e),r.a.createElement("td",{style:{width:"25%"}}),r.a.createElement("td",{style:{width:"25%"}}),r.a.createElement("td",{style:{width:"25%"},className:"has-text-right"},0===a?r.a.createElement("i",{className:"fas fa-spinner fa-spin"}):"$".concat(a)))),r.a.createElement("tbody",null,r.a.createElement("tr",{className:"is-size-7"},r.a.createElement("td",null,"Position"),r.a.createElement("td",{className:"has-text-right "},n[e]?n[e].position:"-"),r.a.createElement("td",null,"Market Val"),r.a.createElement("td",{className:"has-text-right "},n[e]&&a?"$".concat(Math.round(n[e].position*a*100)/100):"-")))))}}]),t}(r.a.Component),ae=Object(i.b)((function(e){return{key_stats:e.stock.key_stats,quote:e.stock.quote,holdings:e.portfolio.holdings}}),{})(te),ne=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("qty_input").value=100}},{key:"render",value:function(){var e=this.props,t=e.submitTrade,a=e.selectSide,n=(e.quote,e.quantity,e.side),l=e.error;return r.a.createElement("div",{className:"whitebg padded outline"},r.a.createElement("p",{className:"has-text-centered is-size-5 bold"},"Trade"),r.a.createElement("p",{className:"has-text-left is-size-7 bold"},"Select:"),r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column is-half"},r.a.createElement("button",{className:"button is-fullwidth is-success ".concat("buy"===n?"":"is-outlined"),onClick:function(){return a("buy")}},"Buy")),r.a.createElement("div",{className:"column is-half"},r.a.createElement("button",{className:"button is-fullwidth is-danger ".concat("buy"===n?"is-outlined":""),onClick:function(){return a("sell")}},"Sell"))),r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column is-half"},r.a.createElement("p",{className:"has-text-left is-size-7 bold"},"Price:"),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"number",step:"0.01",min:"0.01",id:"price_input"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-dollar-sign"}))))),r.a.createElement("div",{className:"column is-half"},r.a.createElement("p",{className:"has-text-left is-size-7 bold"},"Quantity:"),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("input",{className:"input",type:"number",step:"1",min:"1",id:"qty_input"}))))),r.a.createElement("button",{className:"button is-success is-fullwidth",onClick:function(){t(new URLSearchParams(window.location.search).get("ticker"),document.getElementById("price_input").value,document.getElementById("qty_input").value)}},"Submit Order"),r.a.createElement("p",{className:"is-size-7 has-text-danger"},l?"Invalid quantity and/or price.":""))}}]),t}(r.a.Component),re=Object(i.b)((function(e){return{key_stats:e.stock.key_stats,quote:e.stock.quote,quantity:e.trade.quantity,side:e.trade.side,error:e.trade.error}}),{submitTrade:function(e,t,a){return function(n){console.log(e,t,a),n(t<=0||a<=0?{type:"SUBMIT_INVALID_TRADE",ticker:e,price:t,quantity:a}:{type:"SUBMIT_TRADE",ticker:e,price:t,quantity:a})}},selectSide:function(e){return function(t){t({type:"SELECT_SIDE",side:e})}}})(ne),le=function(e){return r.a.createElement("div",null,r.a.createElement(ae,null),r.a.createElement("br",null),r.a.createElement(re,null))},ce=function(e){return function(t){console.log("LOAD STOCK DATA",e),t({type:"START_LOAD_STOCK_DATA",symbol:e});var a="stock/".concat(e,"/stats"),n="stock/".concat(e,"/company"),r=("stock/".concat(e,"/quote/close"),"stock/".concat(e,"/previous")),l="stock/".concat(e,"/chart/1m");fetch("".concat(q,"/").concat(a,"?token=").concat(P)).then((function(e){200===e.status?e.json().then((function(e){t({type:"LOAD_KEY_STATS",key_stats:e}),console.log(e)})):console.log("ERROR")})).catch((function(e){return console.log(e)})),fetch("".concat(q,"/").concat(n,"?token=").concat(P)).then((function(e){200===e.status?e.json().then((function(e){t({type:"LOAD_STOCK_PROFILE",profile:e}),console.log(e)})):console.log("ERROR")})).catch((function(e){return console.log(e)})),fetch("".concat(q,"/").concat(r,"?token=").concat(P)).then((function(e){200===e.status?e.json().then((function(e){console.log(e.close),t({type:"LOAD_STOCK_QUOTE",quote:e.close}),document.getElementById("price_input").value=e.close})):console.log("ERROR")})).catch((function(e){return console.log(e)})),fetch("".concat(q,"/").concat(l,"?token=").concat(P)).then((function(e){200===e.status?e.json().then((function(e){t({type:"LOAD_STOCK_CHART",chart:e}),console.log(e)})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}},oe=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.active,a=(e.error,e.side),n=e.price,l=e.quantity,c=e.symbol,o=e.closeModal,s=e.modalConfirmTrade;return r.a.createElement("div",{className:"modal ".concat(!0===t?"is-active":"")},r.a.createElement("div",{className:"modal-background",onClick:function(){return o()}}),r.a.createElement("div",{className:"modal-content box"},r.a.createElement("div",{className:"has-text-centered"},r.a.createElement("p",{className:"bold is-size-4"},"Trade Confirmation Window"),r.a.createElement("br",null),r.a.createElement("p",null,"You will"," ",r.a.createElement("b",null,a," ",l," share",l>1?"s":"")," ","of ",r.a.createElement("b",null,c)," at ",r.a.createElement("b",null,"$",n,"/share")," for a total of"," ",r.a.createElement("b",null,"$",l*n),"."),r.a.createElement("br",null),r.a.createElement("div",{className:"buttons is-centered"},r.a.createElement("button",{className:"button is-success",onClick:function(){return s()}},"Confirm"),r.a.createElement("button",{className:"button is-danger",onClick:function(){return o()}},"Cancel")))),r.a.createElement("button",{className:"modal-close is-large",onClick:function(){return o()}}))}}]),t}(r.a.Component),se=Object(i.b)((function(e){return{active:e.trade.showModal,side:e.trade.side,price:e.trade.price,quantity:e.trade.quantity,symbol:e.trade.ticker,error:e.trade.error}}),{closeModal:function(){return function(e){e({type:"CLOSE_MODAL"})}},modalConfirmTrade:function(){return function(e){e({type:"MODAL_CONFIRM_TRADE"}),console.log(T.getState().trade);var t=T.getState().trade;fetch("".concat("http://localhost:5000","/trade/submitorder"),{method:"POST",body:JSON.stringify({username:"qwerty",symbol:t.ticker,quantity:t.quantity,price:t.price,side:t.side}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?e.json().then((function(e){console.log("ORDER SUCCESS")})):console.log("ERROR")})).catch((function(e){return console.log(e)}))}}})(oe),ie=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search).get("ticker"),t=this.props,a=t.loadStockData,n=t.loadPortfolioData,r=t.portfolio_loaded,l=(t.barChart,{chart:{height:350,type:"candlestick"},series:[],title:{text:"".concat(e," 1 month chart"),align:"left"},xaxis:{type:"datetime"},yaxis:{tooltip:{enabled:!0}}});(G=new $.a(document.querySelector("#stockchart"),l)).render(),r||n(),a(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.barChart,n=t.symbol,r=t.loadStockData;JSON.stringify(a)!==JSON.stringify(e.barChart)&&G.updateSeries([{data:a.map((function(e){return{x:e.date,y:[e.open,e.high,e.low,e.close]}}))}]),e.symbol!==n&&(r(n),G.updateOptions({title:{text:"".concat(n," 1 month chart")}}))}},{key:"render",value:function(){var e=this.props;e.key_stats,e.profile,e.portfolio_loaded;return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement("br",null),r.a.createElement(se,null),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"columns is-centered"},r.a.createElement("div",{className:"column is-two-third"},r.a.createElement(ee,null)),r.a.createElement("div",{className:"column is-one-third"},r.a.createElement(le,null)))))}}]),t}(r.a.Component),ue=Object(i.b)((function(e){return{key_stats:e.stock.key_stats,profile:e.stock.profile,barChart:e.stock.chart,symbol:e.stock.symbol,portfolio_loaded:e.portfolio.loaded,holdings:e.portfolio.holdings}}),{loadStockData:ce,loadPortfolioData:B})(ie);c.a.render(r.a.createElement(i.a,{store:T},r.a.createElement(o.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0,component:Q}),r.a.createElement(s.a,{path:"/stock",exact:!0,component:ue})))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.05351cf2.chunk.js.map